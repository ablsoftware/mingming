<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>单词消消大竞赛</title>
    <!-- 引入SweetAlert2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>
    <!-- 引入canvas-confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            margin: 0;
        }
        h1 {
            color: #2c3e50;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        #game {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 30px auto;
            max-width: 1400px;
            gap: 30px;
        }
        @media (min-width: 1024px) {
            #game {
                flex-direction: row;
                justify-content: space-around;
                gap: 60px;
            }
        }
        .area {
            width: 100%;
            max-width: 600px;
            padding: 25px;
            border-radius: 15px;
            background: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            min-height: 500px;
        }
        @media (min-width: 1024px) {
            .area {
                width: 48%;
            }
        }
        button {
            margin: 5px;
            padding: 20px 25px;
            border: none;
            border-radius: 10px;
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 23px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        button.matched {
            visibility: hidden;
        }
        #timer {
            font-size: 32px;
            margin: 25px 0;
            color: #2c3e50;
            font-weight: bold;
        }
        #startBtn, #showAnswerBtn {
            font-size: 24px;
            padding: 20px 50px;
            background-color: #2196F3;
            margin-bottom: 25px;
        }
        #showAnswerBtn {
            background-color: #FF9800;
            margin-left: 10px;
            display: none;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 15px;
        }
        .button-placeholder {
            visibility: hidden;
        }
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            button {
                font-size: 18px;
                padding: 15px 20px;
            }
            h1 {
                font-size: 2em;
            }
        }
        /* 新增答案展示样式 */
        .answer-container {
            display: flex;
            justify-content: space-between;
            margin: 20px;
            text-align: left;
        }
        .answer-side {
            width: 45%;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .answer-title {
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: bold;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 5px;
        }
        .answer-pair {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px;
            background: #f5f7fa;
            border-radius: 5px;
        }
        .answer-english {
            color: #2196F3;
            font-weight: bold;
        }
        .answer-chinese {
            color: #FF9800;
        }
        /* 添加难度选择按钮样式 */
        .difficulty-btn {
            margin: 10px;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .difficulty-btn[data-difficulty="easy"] {
            background-color: #4CAF50;
            color: white;
        }
        .difficulty-btn[data-difficulty="medium"] {
            background-color: #FFA500;
            color: white;
        }
        .difficulty-btn[data-difficulty="hard"] {
            background-color: #FF4444;
            color: white;
        }
        .difficulty-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .difficulty-btn:focus {
            outline: 3px solid #2196F3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>单词消消大竞赛</h1>
        <h2>powered by 赵滏城</h2>
        <div id="timer">时间: <span id="time">0</span>秒</div>
        <button id="startBtn">开始游戏</button>
        <button id="showAnswerBtn">查看答案</button>
        <div id="game">
            <div class="area" id="leftArea"></div>
            <div class="area" id="rightArea"></div>
        </div>
    </div>

    <script>
        const words = {
            easy: [
                {english: "achieve", chinese: "达到，实现"},
                {english: "benefit", chinese: "好处，利益"},
                {english: "consider", chinese: "考虑，认为"},
                {english: "develop", chinese: "发展，开发"},
                {english: "encourage", chinese: "鼓励"},
                {english: "familiar", chinese: "熟悉的"},
                {english: "generate", chinese: "产生，生成"},
                {english: "hesitate", chinese: "犹豫"},
                {english: "indicate", chinese: "指示，表明"},
                {english: "journey", chinese: "旅程"},
                {english: "knowledge", chinese: "知识"},
                {english: "maintain", chinese: "维持，保持"},
                {english: "necessary", chinese: "必要的"},
                {english: "observe", chinese: "观察"},
                {english: "prepare", chinese: "准备"},
                {english: "quality", chinese: "质量，品质"},
                {english: "appreciate", chinese: "欣赏，感激"},
                {english: "communicate", chinese: "交流，沟通"},
                {english: "determine", chinese: "决定，确定"},
                {english: "establish", chinese: "建立，设立"},
                {english: "fortunate", chinese: "幸运的"},
                {english: "gradually", chinese: "逐渐地"},
                {english: "identify", chinese: "识别，确认"},
                {english: "majority", chinese: "大多数"},
                {english: "organize", chinese: "组织，安排"},
                {english: "participate", chinese: "参与"},
                {english: "recommend", chinese: "推荐"},
                {english: "specific", chinese: "具体的，特定的"},
                {english: "technology", chinese: "技术"},
                {english: "valuable", chinese: "有价值的"},
                {english: "volunteer", chinese: "志愿者"}
            ],
            medium: [
                {english: "accomplish", chinese: "完成，实现"},
                {english: "circumstance", chinese: "环境，情况"},
                {english: "demonstrate", chinese: "证明，展示"},
                {english: "eliminate", chinese: "消除，排除"},
                {english: "fundamental", chinese: "基本的，根本的"},
                {english: "guarantee", chinese: "保证，担保"},
                {english: "implement", chinese: "实施，执行"},
                {english: "investigate", chinese: "调查，研究"},
                {english: "magnificent", chinese: "宏伟的，壮丽的"},
                {english: "negotiate", chinese: "谈判，协商"},
                {english: "overcome", chinese: "克服，战胜"},
                {english: "perspective", chinese: "观点，看法"},
                {english: "remarkable", chinese: "显著的，非凡的"},
                {english: "significant", chinese: "重要的，显著的"},
                {english: "tremendous", chinese: "巨大的，惊人的"},
                {english: "ultimate", chinese: "最终的，极限的"},
                {english: "anticipate", chinese: "预期，预料"},
                {english: "characteristic", chinese: "特征的，典型的"},
                {english: "controversial", chinese: "有争议的"},
                {english: "distinguish", chinese: "区分，辨别"},
                {english: "enthusiasm", chinese: "热情，热忱"},
                {english: "facilitate", chinese: "促进，使容易"},
                {english: "inevitable", chinese: "不可避免的"},
                {english: "mechanism", chinese: "机制，原理"},
                {english: "optimistic", chinese: "乐观的"},
                {english: "persistent", chinese: "持续的，坚持的"},
                {english: "rational", chinese: "理性的"},
                {english: "sophisticated", chinese: "复杂的，精密的"},
                {english: "sustainable", chinese: "可持续的"},
                {english: "theoretical", chinese: "理论的"},
                {english: "versatile", chinese: "多才多艺的"}
            ],
            hard: [
                {english: "assimilate", chinese: "吸收，同化"},
                {english: "bureaucracy", chinese: "官僚主义"},
                {english: "contemplate", chinese: "沉思，考虑"},
                {english: "deteriorate", chinese: "恶化，退化"},
                {english: "empirical", chinese: "经验主义的"},
                {english: "fluctuate", chinese: "波动，变化"},
                {english: "gratitude", chinese: "感激，谢意"},
                {english: "hierarchy", chinese: "等级制度"},
                {english: "imperative", chinese: "必要的，紧急的"},
                {english: "jurisdiction", chinese: "司法权，管辖权"},
                {english: "legitimate", chinese: "合法的，正当的"},
                {english: "manipulate", chinese: "操纵，控制"},
                {english: "notorious", chinese: "臭名昭著的"},
                {english: "obsolete", chinese: "过时的，废弃的"},
                {english: "pragmatic", chinese: "实用的，务实的"},
                {english: "reciprocal", chinese: "相互的，互惠的"},
                {english: "autonomous", chinese: "自主的，自治的"},
                {english: "catastrophic", chinese: "灾难性的"},
                {english: "deliberate", chinese: "故意的，深思熟虑的"},
                {english: "exemplify", chinese: "例证，作为...的典型"},
                {english: "formidable", chinese: "可怕的，难对付的"},
                {english: "heterogeneous", chinese: "异质的，不同种类的"},
                {english: "indigenous", chinese: "本土的，原生的"},
                {english: "meticulous", chinese: "一丝不苟的"},
                {english: "paradigm", chinese: "范例，模式"},
                {english: "retrospective", chinese: "回顾的，追溯的"},
                {english: "spontaneous", chinese: "自发的，自然的"},
                {english: "tentative", chinese: "暂时的，试验性的"},
                {english: "unprecedented", chinese: "空前的，前所未有的"},
                {english: "vindicate", chinese: "证明...正确"},
                {english: "zealous", chinese: "热心的，热情的"}
            ]
        };

        let timer;
        let timeElapsed = 0;
        let selectedButtons = {left: null, right: null};
        let matchedPairs = {left: new Set(), right: new Set()};
        let gameActive = false;
        let currentGameWords = {left: [], right: []};

        function startGame() {
            if(gameActive) return;
            
            Swal.fire({
                title: '选择难度',
                html: `
                    <button onclick="Swal.clickConfirm()" class="difficulty-btn" data-difficulty="easy">简单</button>
                    <button onclick="Swal.clickConfirm()" class="difficulty-btn" data-difficulty="medium">中等</button>
                    <button onclick="Swal.clickConfirm()" class="difficulty-btn" data-difficulty="hard">困难</button>
                `,
                showConfirmButton: false,
                preConfirm: () => {
                    return document.querySelector('.difficulty-btn:focus')?.dataset.difficulty || 'medium';
                }
            }).then((result) => {
                if (result.value) {
                    initializeGame(result.value);
                }
            });
        }

        function initializeGame(difficulty) {
            gameActive = true;
            timeElapsed = 0;
            matchedPairs = {left: new Set(), right: new Set()};
            selectedButtons = {left: null, right: null};
            document.getElementById("time").innerText = timeElapsed;
            document.getElementById("leftArea").innerHTML = '';
            document.getElementById("rightArea").innerHTML = '';
            document.getElementById("startBtn").innerText = "游戏中...";
            document.getElementById("showAnswerBtn").style.display = "none";
            startTimer();
            generateWords(difficulty);
        }

        function startTimer() {
            timer = setInterval(() => {
                timeElapsed++;
                document.getElementById("time").innerText = timeElapsed;
            }, 1000);
        }

        function generateWords(difficulty = 'medium') {
            const wordPool = words[difficulty];
            const leftWords = [...wordPool].sort(() => 0.5 - Math.random()).slice(0, 6);
            const rightWords = [...wordPool]
                .filter(w => !leftWords.includes(w))
                .sort(() => 0.5 - Math.random())
                .slice(0, 6);
            
            currentGameWords = {left: leftWords, right: rightWords};
            displayWords(leftWords, 'leftArea', 'left');
            displayWords(rightWords, 'rightArea', 'right');
        }

        function displayWords(wordList, areaId, side) {
            const area = document.getElementById(areaId);
            const buttons = [];
            
            // 创建英文按钮
            wordList.forEach(word => {
                const engBtn = document.createElement('button');
                engBtn.innerText = word.english;
                engBtn.dataset.pair = word.english;
                engBtn.dataset.type = 'english';
                engBtn.onclick = () => handleWordClick(engBtn, side, word);
                buttons.push(engBtn);
            });

            // 创建中文按钮
            wordList.forEach(word => {
                const cnBtn = document.createElement('button');
                cnBtn.innerText = word.chinese;
                cnBtn.dataset.pair = word.english;
                cnBtn.dataset.type = 'chinese';
                cnBtn.onclick = () => handleWordClick(cnBtn, side, word);
                buttons.push(cnBtn);
            });

            // 随机排序并添加到区域
            buttons.sort(() => 0.5 - Math.random())
                .forEach(btn => area.appendChild(btn));
        }

        function handleWordClick(button, side, word) {
            if(!gameActive || button.classList.contains('matched')) return;

            if(selectedButtons[side]) {
                if(selectedButtons[side].dataset.pair === button.dataset.pair && 
                   selectedButtons[side].dataset.type !== button.dataset.type) {
                    // 匹配成功
                    selectedButtons[side].classList.add('matched');
                    button.classList.add('matched');
                    matchedPairs[side].add(word.english);
                    selectedButtons[side] = null;
                    
                    if(matchedPairs[side].size === 6) {
                        gameOver(side);
                    }
                } else {
                    // 不匹配，重置选中状态
                    selectedButtons[side].style.backgroundColor = '#4CAF50';
                    selectedButtons[side] = button;
                    button.style.backgroundColor = '#FFA500';
                }
            } else {
                selectedButtons[side] = button;
                button.style.backgroundColor = '#FFA500';
            }
        }

        function showAnswers() {
            const answerHtml = `
                <div class="answer-container">
                    <div class="answer-side">
                        <div class="answer-title">左侧答案</div>
                        ${currentGameWords.left.map(word => `
                            <div class="answer-pair">
                                <span class="answer-english">${word.english}</span>
                                <span class="answer-chinese">${word.chinese}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="answer-side">
                        <div class="answer-title">右侧答案</div>
                        ${currentGameWords.right.map(word => `
                            <div class="answer-pair">
                                <span class="answer-english">${word.english}</span>
                                <span class="answer-chinese">${word.chinese}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            Swal.fire({
                title: '本局游戏答案',
                html: answerHtml,
                width: '80%',
                confirmButtonText: 'ok学废了！'
            });
        }

        function fireworksEffect() {
            const duration = 6 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);
                
                confetti(Object.assign({}, defaults, {
                    particleCount,
                    origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
                }));
                confetti(Object.assign({}, defaults, {
                    particleCount,
                    origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
                }));
            }, 250);
        }

        function gameOver(side) {
            gameActive = false;
            clearInterval(timer);
            document.getElementById("startBtn").innerText = "再来一局";
            document.getElementById("showAnswerBtn").style.display = "inline-block";
            
            const otherSide = side === 'left' ? 'right' : 'left';
            
            // 触发烟花特效
            fireworksEffect();

            Swal.fire({
                title: `🎉用时 ${timeElapsed} 秒，${side === 'left' ? '左' : '右'}侧选手获胜！`,
                text: `用时 ${timeElapsed} 秒`,
                icon: 'success',
                confirmButtonText: '再来一局'
            });

            if(matchedPairs[otherSide].size < 6) {
                Swal.fire({
                    title: `🎉用时 ${timeElapsed} 秒，${otherSide === 'left' ? '左' : '右'}侧选手失败！`,
                    text: `失败者收到了作者的鼓励：相信你可以的！`,
                    icon: 'success',
                    confirmButtonText: '好的呀٩(•̤̀ᵕ•̤́๑)'
                });
            }
        }

        document.getElementById("startBtn").onclick = startGame;
        document.getElementById("showAnswerBtn").onclick = showAnswers;
    </script>
</body>
</html>
