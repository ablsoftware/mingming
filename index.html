<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å•è¯æ¶ˆæ¶ˆå¤§ç«èµ›</title>
    <!-- å¼•å…¥SweetAlert2 -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.css">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.all.min.js"></script>
    <!-- å¼•å…¥canvas-confetti -->
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
    <style>
        body { 
            font-family: Arial, sans-serif;
            text-align: center;
            padding: 20px;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            margin: 0;
        }
        h1 {
            color: #2c3e50;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            font-size: 2.5em;
        }
        #game {
            display: flex;
            flex-direction: column;
            align-items: center;
            margin: 30px auto;
            max-width: 1400px;
            gap: 30px;
        }
        @media (min-width: 1024px) {
            #game {
                flex-direction: row;
                justify-content: space-around;
                gap: 60px;
            }
        }
        .area {
            width: 100%;
            max-width: 600px;
            padding: 25px;
            border-radius: 15px;
            background: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 20px;
            min-height: 500px;
        }
        @media (min-width: 1024px) {
            .area {
                width: 48%;
            }
        }
        button {
            margin: 5px;
            padding: 20px 25px;
            border: none;
            border-radius: 10px;
            background-color: #4CAF50;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
            font-size: 23px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        button:hover {
            background-color: #45a049;
            transform: translateY(-2px);
            box-shadow: 0 6px 8px rgba(0,0,0,0.15);
        }
        button.matched {
            visibility: hidden;
        }
        #timer {
            font-size: 32px;
            margin: 25px 0;
            color: #2c3e50;
            font-weight: bold;
        }
        #startBtn, #showAnswerBtn {
            font-size: 24px;
            padding: 20px 50px;
            background-color: #2196F3;
            margin-bottom: 25px;
        }
        #showAnswerBtn {
            background-color: #FF9800;
            margin-left: 10px;
            display: none;
        }
        .container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 15px;
        }
        .button-placeholder {
            visibility: hidden;
        }
        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }
            button {
                font-size: 18px;
                padding: 15px 20px;
            }
            h1 {
                font-size: 2em;
            }
        }
        /* æ–°å¢ç­”æ¡ˆå±•ç¤ºæ ·å¼ */
        .answer-container {
            display: flex;
            justify-content: space-between;
            margin: 20px;
            text-align: left;
        }
        .answer-side {
            width: 45%;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .answer-title {
            font-size: 1.2em;
            color: #2c3e50;
            margin-bottom: 15px;
            font-weight: bold;
            border-bottom: 2px solid #4CAF50;
            padding-bottom: 5px;
        }
        .answer-pair {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px;
            background: #f5f7fa;
            border-radius: 5px;
        }
        .answer-english {
            color: #2196F3;
            font-weight: bold;
        }
        .answer-chinese {
            color: #FF9800;
        }
        /* æ·»åŠ éš¾åº¦é€‰æ‹©æŒ‰é’®æ ·å¼ */
        .difficulty-btn {
            margin: 10px;
            padding: 15px 30px;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .difficulty-btn[data-difficulty="easy"] {
            background-color: #4CAF50;
            color: white;
        }
        .difficulty-btn[data-difficulty="medium"] {
            background-color: #FFA500;
            color: white;
        }
        .difficulty-btn[data-difficulty="hard"] {
            background-color: #FF4444;
            color: white;
        }
        .difficulty-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }
        .difficulty-btn:focus {
            outline: 3px solid #2196F3;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>å•è¯æ¶ˆæ¶ˆå¤§ç«èµ›</h1>
        <h2>powered by èµµæ»åŸ</h2>
        <div id="timer">æ—¶é—´: <span id="time">0</span>ç§’</div>
        <button id="startBtn">å¼€å§‹æ¸¸æˆ</button>
        <button id="showAnswerBtn">æŸ¥çœ‹ç­”æ¡ˆ</button>
        <div id="game">
            <div class="area" id="leftArea"></div>
            <div class="area" id="rightArea"></div>
        </div>
    </div>

    <script>
        const words = {
            easy: [
                {english: "achieve", chinese: "è¾¾åˆ°ï¼Œå®ç°"},
                {english: "benefit", chinese: "å¥½å¤„ï¼Œåˆ©ç›Š"},
                {english: "consider", chinese: "è€ƒè™‘ï¼Œè®¤ä¸º"},
                {english: "develop", chinese: "å‘å±•ï¼Œå¼€å‘"},
                {english: "encourage", chinese: "é¼“åŠ±"},
                {english: "familiar", chinese: "ç†Ÿæ‚‰çš„"},
                {english: "generate", chinese: "äº§ç”Ÿï¼Œç”Ÿæˆ"},
                {english: "hesitate", chinese: "çŠ¹è±«"},
                {english: "indicate", chinese: "æŒ‡ç¤ºï¼Œè¡¨æ˜"},
                {english: "journey", chinese: "æ—…ç¨‹"},
                {english: "knowledge", chinese: "çŸ¥è¯†"},
                {english: "maintain", chinese: "ç»´æŒï¼Œä¿æŒ"},
                {english: "necessary", chinese: "å¿…è¦çš„"},
                {english: "observe", chinese: "è§‚å¯Ÿ"},
                {english: "prepare", chinese: "å‡†å¤‡"},
                {english: "quality", chinese: "è´¨é‡ï¼Œå“è´¨"},
                {english: "appreciate", chinese: "æ¬£èµï¼Œæ„Ÿæ¿€"},
                {english: "communicate", chinese: "äº¤æµï¼Œæ²Ÿé€š"},
                {english: "determine", chinese: "å†³å®šï¼Œç¡®å®š"},
                {english: "establish", chinese: "å»ºç«‹ï¼Œè®¾ç«‹"},
                {english: "fortunate", chinese: "å¹¸è¿çš„"},
                {english: "gradually", chinese: "é€æ¸åœ°"},
                {english: "identify", chinese: "è¯†åˆ«ï¼Œç¡®è®¤"},
                {english: "majority", chinese: "å¤§å¤šæ•°"},
                {english: "organize", chinese: "ç»„ç»‡ï¼Œå®‰æ’"},
                {english: "participate", chinese: "å‚ä¸"},
                {english: "recommend", chinese: "æ¨è"},
                {english: "specific", chinese: "å…·ä½“çš„ï¼Œç‰¹å®šçš„"},
                {english: "technology", chinese: "æŠ€æœ¯"},
                {english: "valuable", chinese: "æœ‰ä»·å€¼çš„"},
                {english: "volunteer", chinese: "å¿—æ„¿è€…"}
            ],
            medium: [
                {english: "accomplish", chinese: "å®Œæˆï¼Œå®ç°"},
                {english: "circumstance", chinese: "ç¯å¢ƒï¼Œæƒ…å†µ"},
                {english: "demonstrate", chinese: "è¯æ˜ï¼Œå±•ç¤º"},
                {english: "eliminate", chinese: "æ¶ˆé™¤ï¼Œæ’é™¤"},
                {english: "fundamental", chinese: "åŸºæœ¬çš„ï¼Œæ ¹æœ¬çš„"},
                {english: "guarantee", chinese: "ä¿è¯ï¼Œæ‹…ä¿"},
                {english: "implement", chinese: "å®æ–½ï¼Œæ‰§è¡Œ"},
                {english: "investigate", chinese: "è°ƒæŸ¥ï¼Œç ”ç©¶"},
                {english: "magnificent", chinese: "å®ä¼Ÿçš„ï¼Œå£®ä¸½çš„"},
                {english: "negotiate", chinese: "è°ˆåˆ¤ï¼Œåå•†"},
                {english: "overcome", chinese: "å…‹æœï¼Œæˆ˜èƒœ"},
                {english: "perspective", chinese: "è§‚ç‚¹ï¼Œçœ‹æ³•"},
                {english: "remarkable", chinese: "æ˜¾è‘—çš„ï¼Œéå‡¡çš„"},
                {english: "significant", chinese: "é‡è¦çš„ï¼Œæ˜¾è‘—çš„"},
                {english: "tremendous", chinese: "å·¨å¤§çš„ï¼ŒæƒŠäººçš„"},
                {english: "ultimate", chinese: "æœ€ç»ˆçš„ï¼Œæé™çš„"},
                {english: "anticipate", chinese: "é¢„æœŸï¼Œé¢„æ–™"},
                {english: "characteristic", chinese: "ç‰¹å¾çš„ï¼Œå…¸å‹çš„"},
                {english: "controversial", chinese: "æœ‰äº‰è®®çš„"},
                {english: "distinguish", chinese: "åŒºåˆ†ï¼Œè¾¨åˆ«"},
                {english: "enthusiasm", chinese: "çƒ­æƒ…ï¼Œçƒ­å¿±"},
                {english: "facilitate", chinese: "ä¿ƒè¿›ï¼Œä½¿å®¹æ˜“"},
                {english: "inevitable", chinese: "ä¸å¯é¿å…çš„"},
                {english: "mechanism", chinese: "æœºåˆ¶ï¼ŒåŸç†"},
                {english: "optimistic", chinese: "ä¹è§‚çš„"},
                {english: "persistent", chinese: "æŒç»­çš„ï¼ŒåšæŒçš„"},
                {english: "rational", chinese: "ç†æ€§çš„"},
                {english: "sophisticated", chinese: "å¤æ‚çš„ï¼Œç²¾å¯†çš„"},
                {english: "sustainable", chinese: "å¯æŒç»­çš„"},
                {english: "theoretical", chinese: "ç†è®ºçš„"},
                {english: "versatile", chinese: "å¤šæ‰å¤šè‰ºçš„"}
            ],
            hard: [
                {english: "assimilate", chinese: "å¸æ”¶ï¼ŒåŒåŒ–"},
                {english: "bureaucracy", chinese: "å®˜åƒšä¸»ä¹‰"},
                {english: "contemplate", chinese: "æ²‰æ€ï¼Œè€ƒè™‘"},
                {english: "deteriorate", chinese: "æ¶åŒ–ï¼Œé€€åŒ–"},
                {english: "empirical", chinese: "ç»éªŒä¸»ä¹‰çš„"},
                {english: "fluctuate", chinese: "æ³¢åŠ¨ï¼Œå˜åŒ–"},
                {english: "gratitude", chinese: "æ„Ÿæ¿€ï¼Œè°¢æ„"},
                {english: "hierarchy", chinese: "ç­‰çº§åˆ¶åº¦"},
                {english: "imperative", chinese: "å¿…è¦çš„ï¼Œç´§æ€¥çš„"},
                {english: "jurisdiction", chinese: "å¸æ³•æƒï¼Œç®¡è¾–æƒ"},
                {english: "legitimate", chinese: "åˆæ³•çš„ï¼Œæ­£å½“çš„"},
                {english: "manipulate", chinese: "æ“çºµï¼Œæ§åˆ¶"},
                {english: "notorious", chinese: "è‡­åæ˜­è‘—çš„"},
                {english: "obsolete", chinese: "è¿‡æ—¶çš„ï¼ŒåºŸå¼ƒçš„"},
                {english: "pragmatic", chinese: "å®ç”¨çš„ï¼ŒåŠ¡å®çš„"},
                {english: "reciprocal", chinese: "ç›¸äº’çš„ï¼Œäº’æƒ çš„"},
                {english: "autonomous", chinese: "è‡ªä¸»çš„ï¼Œè‡ªæ²»çš„"},
                {english: "catastrophic", chinese: "ç¾éš¾æ€§çš„"},
                {english: "deliberate", chinese: "æ•…æ„çš„ï¼Œæ·±æ€ç†Ÿè™‘çš„"},
                {english: "exemplify", chinese: "ä¾‹è¯ï¼Œä½œä¸º...çš„å…¸å‹"},
                {english: "formidable", chinese: "å¯æ€•çš„ï¼Œéš¾å¯¹ä»˜çš„"},
                {english: "heterogeneous", chinese: "å¼‚è´¨çš„ï¼Œä¸åŒç§ç±»çš„"},
                {english: "indigenous", chinese: "æœ¬åœŸçš„ï¼ŒåŸç”Ÿçš„"},
                {english: "meticulous", chinese: "ä¸€ä¸ä¸è‹Ÿçš„"},
                {english: "paradigm", chinese: "èŒƒä¾‹ï¼Œæ¨¡å¼"},
                {english: "retrospective", chinese: "å›é¡¾çš„ï¼Œè¿½æº¯çš„"},
                {english: "spontaneous", chinese: "è‡ªå‘çš„ï¼Œè‡ªç„¶çš„"},
                {english: "tentative", chinese: "æš‚æ—¶çš„ï¼Œè¯•éªŒæ€§çš„"},
                {english: "unprecedented", chinese: "ç©ºå‰çš„ï¼Œå‰æ‰€æœªæœ‰çš„"},
                {english: "vindicate", chinese: "è¯æ˜...æ­£ç¡®"},
                {english: "zealous", chinese: "çƒ­å¿ƒçš„ï¼Œçƒ­æƒ…çš„"}
            ]
        };

        let timer;
        let timeElapsed = 0;
        let selectedButtons = {left: null, right: null};
        let matchedPairs = {left: new Set(), right: new Set()};
        let gameActive = false;
        let currentGameWords = {left: [], right: []};

        function startGame() {
            if(gameActive) return;
            
            Swal.fire({
                title: 'é€‰æ‹©éš¾åº¦',
                html: `
                    <button onclick="Swal.clickConfirm()" class="difficulty-btn" data-difficulty="easy">ç®€å•</button>
                    <button onclick="Swal.clickConfirm()" class="difficulty-btn" data-difficulty="medium">ä¸­ç­‰</button>
                    <button onclick="Swal.clickConfirm()" class="difficulty-btn" data-difficulty="hard">å›°éš¾</button>
                `,
                showConfirmButton: false,
                preConfirm: () => {
                    return document.querySelector('.difficulty-btn:focus')?.dataset.difficulty || 'medium';
                }
            }).then((result) => {
                if (result.value) {
                    initializeGame(result.value);
                }
            });
        }

        function initializeGame(difficulty) {
            gameActive = true;
            timeElapsed = 0;
            matchedPairs = {left: new Set(), right: new Set()};
            selectedButtons = {left: null, right: null};
            document.getElementById("time").innerText = timeElapsed;
            document.getElementById("leftArea").innerHTML = '';
            document.getElementById("rightArea").innerHTML = '';
            document.getElementById("startBtn").innerText = "æ¸¸æˆä¸­...";
            document.getElementById("showAnswerBtn").style.display = "none";
            startTimer();
            generateWords(difficulty);
        }

        function startTimer() {
            timer = setInterval(() => {
                timeElapsed++;
                document.getElementById("time").innerText = timeElapsed;
            }, 1000);
        }

        function generateWords(difficulty = 'medium') {
            const wordPool = words[difficulty];
            const leftWords = [...wordPool].sort(() => 0.5 - Math.random()).slice(0, 6);
            const rightWords = [...wordPool]
                .filter(w => !leftWords.includes(w))
                .sort(() => 0.5 - Math.random())
                .slice(0, 6);
            
            currentGameWords = {left: leftWords, right: rightWords};
            displayWords(leftWords, 'leftArea', 'left');
            displayWords(rightWords, 'rightArea', 'right');
        }

        function displayWords(wordList, areaId, side) {
            const area = document.getElementById(areaId);
            const buttons = [];
            
            // åˆ›å»ºè‹±æ–‡æŒ‰é’®
            wordList.forEach(word => {
                const engBtn = document.createElement('button');
                engBtn.innerText = word.english;
                engBtn.dataset.pair = word.english;
                engBtn.dataset.type = 'english';
                engBtn.onclick = () => handleWordClick(engBtn, side, word);
                buttons.push(engBtn);
            });

            // åˆ›å»ºä¸­æ–‡æŒ‰é’®
            wordList.forEach(word => {
                const cnBtn = document.createElement('button');
                cnBtn.innerText = word.chinese;
                cnBtn.dataset.pair = word.english;
                cnBtn.dataset.type = 'chinese';
                cnBtn.onclick = () => handleWordClick(cnBtn, side, word);
                buttons.push(cnBtn);
            });

            // éšæœºæ’åºå¹¶æ·»åŠ åˆ°åŒºåŸŸ
            buttons.sort(() => 0.5 - Math.random())
                .forEach(btn => area.appendChild(btn));
        }

        function handleWordClick(button, side, word) {
            if(!gameActive || button.classList.contains('matched')) return;

            if(selectedButtons[side]) {
                if(selectedButtons[side].dataset.pair === button.dataset.pair && 
                   selectedButtons[side].dataset.type !== button.dataset.type) {
                    // åŒ¹é…æˆåŠŸ
                    selectedButtons[side].classList.add('matched');
                    button.classList.add('matched');
                    matchedPairs[side].add(word.english);
                    selectedButtons[side] = null;
                    
                    if(matchedPairs[side].size === 6) {
                        gameOver(side);
                    }
                } else {
                    // ä¸åŒ¹é…ï¼Œé‡ç½®é€‰ä¸­çŠ¶æ€
                    selectedButtons[side].style.backgroundColor = '#4CAF50';
                    selectedButtons[side] = button;
                    button.style.backgroundColor = '#FFA500';
                }
            } else {
                selectedButtons[side] = button;
                button.style.backgroundColor = '#FFA500';
            }
        }

        function showAnswers() {
            const answerHtml = `
                <div class="answer-container">
                    <div class="answer-side">
                        <div class="answer-title">å·¦ä¾§ç­”æ¡ˆ</div>
                        ${currentGameWords.left.map(word => `
                            <div class="answer-pair">
                                <span class="answer-english">${word.english}</span>
                                <span class="answer-chinese">${word.chinese}</span>
                            </div>
                        `).join('')}
                    </div>
                    <div class="answer-side">
                        <div class="answer-title">å³ä¾§ç­”æ¡ˆ</div>
                        ${currentGameWords.right.map(word => `
                            <div class="answer-pair">
                                <span class="answer-english">${word.english}</span>
                                <span class="answer-chinese">${word.chinese}</span>
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;

            Swal.fire({
                title: 'æœ¬å±€æ¸¸æˆç­”æ¡ˆ',
                html: answerHtml,
                width: '80%',
                confirmButtonText: 'okå­¦åºŸäº†ï¼'
            });
        }

        function fireworksEffect() {
            const duration = 6 * 1000;
            const animationEnd = Date.now() + duration;
            const defaults = { startVelocity: 30, spread: 360, ticks: 60, zIndex: 9999 };

            function randomInRange(min, max) {
                return Math.random() * (max - min) + min;
            }

            const interval = setInterval(function() {
                const timeLeft = animationEnd - Date.now();

                if (timeLeft <= 0) {
                    return clearInterval(interval);
                }

                const particleCount = 50 * (timeLeft / duration);
                
                confetti(Object.assign({}, defaults, {
                    particleCount,
                    origin: { x: randomInRange(0.1, 0.3), y: Math.random() - 0.2 }
                }));
                confetti(Object.assign({}, defaults, {
                    particleCount,
                    origin: { x: randomInRange(0.7, 0.9), y: Math.random() - 0.2 }
                }));
            }, 250);
        }

        function gameOver(side) {
            gameActive = false;
            clearInterval(timer);
            document.getElementById("startBtn").innerText = "å†æ¥ä¸€å±€";
            document.getElementById("showAnswerBtn").style.display = "inline-block";
            
            const otherSide = side === 'left' ? 'right' : 'left';
            
            // è§¦å‘çƒŸèŠ±ç‰¹æ•ˆ
            fireworksEffect();

            Swal.fire({
                title: `ğŸ‰ç”¨æ—¶ ${timeElapsed} ç§’ï¼Œ${side === 'left' ? 'å·¦' : 'å³'}ä¾§é€‰æ‰‹è·èƒœï¼`,
                text: `ç”¨æ—¶ ${timeElapsed} ç§’`,
                icon: 'success',
                confirmButtonText: 'å†æ¥ä¸€å±€'
            });

            if(matchedPairs[otherSide].size < 6) {
                Swal.fire({
                    title: `ğŸ‰ç”¨æ—¶ ${timeElapsed} ç§’ï¼Œ${otherSide === 'left' ? 'å·¦' : 'å³'}ä¾§é€‰æ‰‹å¤±è´¥ï¼`,
                    text: `å¤±è´¥è€…æ”¶åˆ°äº†ä½œè€…çš„é¼“åŠ±ï¼šç›¸ä¿¡ä½ å¯ä»¥çš„ï¼`,
                    icon: 'success',
                    confirmButtonText: 'å¥½çš„å‘€Ù©(â€¢Ì¤Ì€áµ•â€¢Ì¤Ìà¹‘)'
                });
            }
        }

        document.getElementById("startBtn").onclick = startGame;
        document.getElementById("showAnswerBtn").onclick = showAnswers;
    </script>
</body>
</html>
